# JVM
### 정의
자바 가상 머신 JVM(Java Virtual Machine)은 자바 프로그램 실행환경을 만들어 주는 소프트웨어입니다. 자바 코드를 컴파일하여 .class 바이트 코드로 만들면 이 코드가 자바 가상 머신 환경에서 실행됩니다.

### 구성

### 메모리 영역
- 메서드 영역: 프로그램을 실행하는데 필요한 공통 데이터를 관리합니다.
  - 클래스 정보: 클래스의 실행 코드(바이트 코드), 필드, 메서드와 생성자 코드 등 모든 실행 코드가 존재합니다.
  - static 정보: `static` 변수들을 보관합니다.
  - 런타임 상수 풀: 프로그램을 실행하는데 필요한 공통 리터럴 상수를 보관합니다.
- Stack 영역: 실제 프로그램이 실행되는 영역입니다. 메서드를 실행할 때마다 하나씩 쌓입니다. 각 프레임은 지역 변수, 중간 연산 결과, 메서드 호출 정보 등을 포함합니다.
  - 스택 프레임: 스택 영역이 쌓이는 네모 박스가 하나의 스택 프레임입니다. 메서드를 호출할 때마다 하나의 스택 프레임이 쌓이고 메서드가 종료되면 해당 스택 프레임이 제거됩니다.
- Heap 영역: 객체(인스턴스)가 생성되는 영역입니다. `new` 명령어를 사용하면 이 영역을 사용합니다.
  - 가비지 컬렉션이 이루어지는 주요 영역이며 더 이상 참조되지 않는 객체는 GC에 의해 제거됩니다.
- ❗ 참고
  - 스택 영역은 더 정확히 말하면 각 스레드 별로 하나의 실행 스택이 생성됩니다. 따라서 스레드 수만큼 스택 영역이 생성됩니다.

- 메서드는 메서드 영역에!!
  - 같은 클래스로부터 생성된 객체라도 인스턴스 내부의 변수 값은 다를 수 있지만 메서드는 공통된 코드를 공유합니다.
  - 따라서 객체가 생성될 때 인스턴스 변수에는 메모리가 할당되지만 메서드에 대한 새로운 메모리 할당은 일어나지 않습니다.
  - 정리하면 인스턴스의 메서드를 호출하면 실제로는 메서드 영역에 있는 코드를 불러서 수행합니다.

### 참고
- [JVM 내부 동작 관련 정리 글](https://shipilev.net/jvm/anatomy-quarks/)
- [개인 블로그 정리 글](https://developerbee.tistory.com/137)
